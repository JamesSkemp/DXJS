function dice(e,t){this.name=e||"unamed dice",this.value=void 0,this.faces=t||[]}dice.prototype.roll=function(){var e=Math.floor(Math.random()*this.faces.length);return this.value=this.faces[e],this.value};var dx=function(){for(var e=2;20>=e;e++){for(var t=[],r=1;e>=r;r++)t.push(r);this["d"+e]=new dice("d"+e,t)}};dx.prototype.showDice=function(){var e=[];for(var t in this)this[t]instanceof dice&&e.push(this[t]);return e},dx.prototype._tryToParseDice=function(e){if(console.log("trying to create dice: ",e),!/[^1-9]{0}d[1-9]+/.test(e))throw"no such dice: "+e;for(var t=/[^1-9]{0}d[1-9]+/.exec(e)[0],r=parseInt(t.replace(/[a-z A-Z]/g,"")),i=[],a=1;r>=a;a++)i.push(a);this[t]=new dice(e,i)},dx.prototype._evaluateSingleRoll=function(e){var t=[],r=/[a-z]/.exec(e).index,i=1;if(r>0&&(i=parseInt(e.substring(0,r))),r>=0){var a=e.substring(r);void 0===this[a]&&this._tryToParseDice(a);for(var o=0,s=0;i>s;s++){var n=this[a].roll();t.push({value:n,"throw":a}),o+=n}}return{value:o,"throw":e,rolls:t}},dx.prototype.roll=function(e){var t=e.split(/([\+\-\/\*])/),r=[],i=void 0,a=0,o=this;return t.forEach(function(e){switch(e){case"+":case"-":case"/":case"*":i=e;break;default:var t=o._evaluateSingleRoll(e.trim());r.push(t),"+"===i|void 0===i?a+=t.value:"-"===i?a-=t.value:"*"===i?a*=t.value:"/"===i&&(a/=t.value)}}),{value:a,"throw":e,rolls:r}},DX=new dx;