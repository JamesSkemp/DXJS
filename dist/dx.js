function dice(e,t){this.name=e||"unamed dice",this.value=void 0,this.faces=t||[]}dice.prototype.roll=function(){var e=Math.floor(Math.random()*this.faces.length);return this.value=this.faces[e],this.value},dice.prototype.handfull=function(e){for(var t=0,r=[],i=0;e>i;i++){var a=this.roll();r.push({value:a,"throw":this.name}),t+=a}var o=r.reduce(function(e,t,r,i){var a=e;return 0!=r&&(a+="  "),a+t.value},"");return{value:t,"throw":e+this.name,rolls:r,overview:o}};var dx=function(){for(var e=2;20>=e;e++)this.addStandardDice(e)};dx.prototype.addDice=function(e,t){return this[e]=new dice(e,t),this[e]},dx.prototype.addStandardDice=function(e){for(var t=[],r=1;e>=r;r++)t.push(r);return this["d"+e]=new dice("d"+e,t),this["d"+e]},dx.prototype.showDice=function(){var e=[];for(var t in this)this[t]instanceof dice&&e.push(this[t]);return e},dx.prototype._tryToParseDice=function(e){if(console.log("trying to create dice: ",e),!/[^1-9]{0}d[1-9]+/.test(e))throw"no such dice: "+e;for(var t=/[^1-9]{0}d[1-9]+/.exec(e)[0],r=parseInt(t.replace(/[a-z A-Z]/g,"")),i=[],a=1;r>=a;a++)i.push(a);this[t]=new dice(e,i)},dx.prototype._evaluateSingleRoll=function(e){var t=/[a-z]/.exec(e).index,r=1;if(t>0&&(r=parseInt(e.substring(0,t))),t>=0){var i=e.substring(t);return void 0===this[i]&&this._tryToParseDice(i),this[i].handfull(r)}},dx.prototype.roll=function(e){var t=e.split(/([\+\-\/\*])/),r=[],i=void 0,a=void 0,o="",n=this;return t.forEach(function(e){switch(e){case"+":case"-":case"/":case"*":i=e;break;default:var t=n._evaluateSingleRoll(e.trim());r.push(t),void 0===a&&(a=isNaN(parseInt(t.value))?" ":0),"+"===i|void 0===i?a+=t.value:"-"===i?a-=t.value:"*"===i?a*=t.value:"/"===i&&(a/=t.value),void 0!=i&&(o+=" "+i+" "),o+="("+t.overview+") "}}),{value:a,"throw":e,rolls:r,overview:o}},DX=new dx;